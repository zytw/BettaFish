# BettaFish æœ¬åœ°å·æ˜ å°„é…ç½®å®ŒæˆæŠ¥å‘Š

## ğŸ¯ é…ç½®æ¦‚è¿°

æˆåŠŸä¸ºBettaFishé¡¹ç›®é…ç½®äº†æœ¬åœ°å·æ˜ å°„åŠŸèƒ½ï¼Œç°åœ¨æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶å’ŒæŠ¥å‘Šéƒ½ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°Windowsç›®å½• `D:\bettafish\reports` ä¸­ã€‚

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. Docker Composeé…ç½®æ›´æ–° âœ…
**æ–‡ä»¶**: `docker-compose.yml`
**å˜æ›´**:
```yaml
volumes:
  # æœ¬åœ°æ—¥å¿—ç›®å½•æ˜ å°„
  - ./logs:/app/logs
  # æœ¬åœ°æŠ¥å‘Šç›®å½•æ˜ å°„ - æ‰€æœ‰ç”Ÿæˆçš„æŠ¥å‘Šç»Ÿä¸€å­˜å‚¨åˆ°æœ¬åœ°
  - D:/bettafish/reports:/app/reports
  - ./final_reports:/app/final_reports
  - ./insight_engine_streamlit_reports:/app/insight_engine_streamlit_reports
  - ./media_engine_streamlit_reports:/app/media_engine_streamlit_reports
  - ./query_engine_streamlit_reports:/app/query_engine_streamlit_reports
```

**å…³é”®æ–°å¢**:
- æ˜ å°„è·¯å¾„: `D:/bettafish/reports:/app/reports`
- ç”¨é€”: ç»Ÿä¸€å­˜å‚¨æ‰€æœ‰ç”Ÿæˆçš„æŠ¥å‘Šå’Œæ–‡ä»¶

### 2. åº”ç”¨ç¨‹åºé…ç½®æ›´æ–° âœ…
**æ–‡ä»¶**: `config.py`
**æ–°å¢é…ç½®**:
```python
# ======================= æ–‡ä»¶è¾“å‡ºé…ç½® ======================
OUTPUT_DIR: str = Field("/app/reports", description="æŠ¥å‘Šå’Œè¾“å‡ºæ–‡ä»¶çš„ä¿å­˜ç›®å½•")
```

**å½±å“èŒƒå›´**:
- QueryEngineä¸­çš„ `_save_report()` æ–¹æ³•
- æ‰€æœ‰çŠ¶æ€æ–‡ä»¶ä¿å­˜é€»è¾‘
- æ·±åº¦æœç´¢æŠ¥å‘Šç”Ÿæˆ
- å…¶ä»–è¾“å‡ºæ–‡ä»¶å¤„ç†

### 3. éªŒè¯æµ‹è¯•å®Œæˆ âœ…
**æµ‹è¯•è„šæœ¬**: `test_volume_mapping.py`
**éªŒè¯ç»“æœ**:
- âœ… Docker Composeé…ç½®: é€šè¿‡
- âœ… OUTPUT_DIRé…ç½®: é€šè¿‡
- âœ… å·æ˜ å°„é€»è¾‘: é€šè¿‡
- âœ… QueryEngineé›†æˆ: é€šè¿‡
- âœ… åº”ç”¨ç¨‹åºå…¼å®¹æ€§: é€šè¿‡
- âš ï¸ æœ¬åœ°ç›®å½•æ£€æŸ¥: éœ€è¦ç”¨æˆ·æ‰‹åŠ¨åˆ›å»º

**æˆåŠŸç‡**: 83.3% (5/6é¡¹é€šè¿‡)

## ğŸ“ ç›®å½•æ˜ å°„å…³ç³»

| å®¹å™¨å†…è·¯å¾„ | æœ¬åœ°è·¯å¾„ | è¯´æ˜ |
|-----------|----------|------|
| `/app/logs` | `./logs` | æ—¥å¿—æ–‡ä»¶ |
| `/app/reports` | `D:/bettafish/reports` | ä¸»è¦æŠ¥å‘Šè¾“å‡º (æ–°å¢) |
| `/app/final_reports` | `./final_reports` | æœ€ç»ˆæŠ¥å‘Š |
| `/app/insight_engine_streamlit_reports` | `./insight_engine_streamlit_reports` | Insightå¼•æ“æŠ¥å‘Š |
| `/app/media_engine_streamlit_reports` | `./media_engine_streamlit_reports` | Mediaå¼•æ“æŠ¥å‘Š |
| `/app/query_engine_streamlit_reports` | `./query_engine_streamlit_reports` | Queryå¼•æ“æŠ¥å‘Š |

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### 1. åˆ›å»ºæœ¬åœ°ç›®å½•
```bash
# åœ¨Windowså‘½ä»¤æç¤ºç¬¦æˆ–PowerShellä¸­æ‰§è¡Œ
mkdir D:\bettafish\reports
```

### 2. é‡å¯Dockerå®¹å™¨
```bash
# åœæ­¢ç°æœ‰å®¹å™¨
docker-compose down

# é‡æ–°å¯åŠ¨å®¹å™¨ï¼ˆåº”ç”¨æ–°çš„å·æ˜ å°„ï¼‰
docker-compose up -d
```

### 3. éªŒè¯å·æ˜ å°„
```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose ps

# éªŒè¯å·æ˜ å°„æ˜¯å¦ç”Ÿæ•ˆ
docker inspect bettafish | findstr "D:/bettafish/reports"
```

### 4. æµ‹è¯•åŠŸèƒ½
1. è¿è¡Œæ·±åº¦æœç´¢åˆ†æ
2. ç”ŸæˆæŠ¥å‘Šæ–‡ä»¶
3. æ£€æŸ¥ `D:\bettafish\reports` ç›®å½•
4. ç¡®è®¤æ–‡ä»¶å·²ä¿å­˜åˆ°æœ¬åœ°

## ğŸ“‹ å­˜å‚¨çš„æ–‡ä»¶ç±»å‹

### è‡ªåŠ¨ä¿å­˜çš„æ–‡ä»¶
1. **æ·±åº¦æœç´¢æŠ¥å‘Š**
   - æ ¼å¼: `deep_search_report_{query}_{timestamp}.md`
   - å†…å®¹: æœç´¢ç»“æœã€åˆ†ææŠ¥å‘Šã€æ€»ç»“

2. **çŠ¶æ€æ–‡ä»¶**
   - æ ¼å¼: `state_{query}_{timestamp}.json`
   - å†…å®¹: æœç´¢çŠ¶æ€ã€ä¸­é—´ç»“æœã€é…ç½®ä¿¡æ¯

3. **å…¶ä»–è¾“å‡ºæ–‡ä»¶**
   - ä¸´æ—¶æ–‡ä»¶
   - è°ƒè¯•æ—¥å¿—
   - ä¸­é—´ç»“æœ

### ç¤ºä¾‹æ–‡ä»¶è·¯å¾„
```
D:/bettafish/reports/
â”œâ”€â”€ deep_search_report_äººå·¥æ™ºèƒ½_20251106_143022.md
â”œâ”€â”€ deep_search_report_åŒºå—é“¾æŠ€æœ¯_20251106_144530.md
â”œâ”€â”€ state_äººå·¥æ™ºèƒ½_20251106_143022.json
â”œâ”€â”€ state_åŒºå—é“¾æŠ€æœ¯_20251106_144530.json
â””â”€â”€ ...
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### å·æ˜ å°„åŸç†
1. **åº”ç”¨ç¨‹åº** â†’ ç”Ÿæˆæ–‡ä»¶åˆ° `/app/reports`
2. **å®¹å™¨å†…** â†’ æ–‡ä»¶è‡ªåŠ¨åŒæ­¥åˆ°æœ¬åœ°
3. **æœ¬åœ°** â†’ æ–‡ä»¶ä¿å­˜åˆ° `D:\bettafish\reports`

### é…ç½®æµç¨‹
1. **docker-compose.yml** â†’ å®šä¹‰å·æ˜ å°„
2. **config.py** â†’ è®¾ç½®OUTPUT_DIR
3. **QueryEngine** â†’ ä½¿ç”¨é…ç½®ä¿å­˜æ–‡ä»¶
4. **Docker** â†’ è‡ªåŠ¨åŒæ­¥æ–‡ä»¶

### ä¼˜åŠ¿
- âœ… **æ•°æ®æŒä¹…åŒ–**: å®¹å™¨åˆ é™¤ä¸ä¼šä¸¢å¤±æ–‡ä»¶
- âœ… **æ˜“äºè®¿é—®**: æ— éœ€è¿›å…¥å®¹å™¨å³å¯æŸ¥çœ‹æ–‡ä»¶
- âœ… **å¤‡ä»½æ–¹ä¾¿**: ç›´æ¥å¤‡ä»½æœ¬åœ°ç›®å½•
- âœ… **è·¨å¹³å°**: é€‚ç”¨äºWindowsã€macOSã€Linux

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç›®å½•æƒé™
ç¡®ä¿å¯¹ `D:\bettafish\reports` ç›®å½•æœ‰è¯»å†™æƒé™ã€‚

### 2. ç£ç›˜ç©ºé—´
å®šæœŸæ¸…ç†æ—§æŠ¥å‘Šä»¥é¿å…å ç”¨è¿‡å¤šç£ç›˜ç©ºé—´ã€‚

### 3. è·¯å¾„æ ¼å¼
- Windowsè·¯å¾„ä½¿ç”¨æ­£æ–œæ : `D:/bettafish/reports`
- Dockerè‡ªåŠ¨å¤„ç†è·¯å¾„è½¬æ¢

### 4. ç¯å¢ƒå˜é‡
å¦‚éœ€è‡ªå®šä¹‰è¾“å‡ºç›®å½•ï¼Œå¯åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®:
```bash
OUTPUT_DIR=/custom/path
```

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1: æ–‡ä»¶æœªåŒæ­¥åˆ°æœ¬åœ°
**å¯èƒ½åŸå› **:
- å®¹å™¨æœªé‡å¯
- ç›®å½•æƒé™ä¸è¶³
- è·¯å¾„é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. é‡å¯å®¹å™¨
docker-compose down && docker-compose up -d

# 2. æ£€æŸ¥ç›®å½•æƒé™
ls -la D:/bettafish/reports

# 3. æ£€æŸ¥Dockeræ—¥å¿—
docker-compose logs bettafish
```

### é—®é¢˜2: ç›®å½•åˆ›å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ‰‹åŠ¨åˆ›å»ºç›®å½•
mkdir D:/bettafish/reports

# æˆ–åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­åˆ›å»º
```

### é—®é¢˜3: æƒé™è¢«æ‹’ç»
**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
# æˆ–è®¾ç½®æ­£ç¡®çš„ç›®å½•æƒé™
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **æœ¬åœ°å·æ˜ å°„ä½¿ç”¨è¯´æ˜.md** - è¯¦ç»†ä½¿ç”¨æŒ‡å—
2. **test_volume_mapping.py** - é…ç½®éªŒè¯è„šæœ¬
3. **docker-compose.yml** - å®¹å™¨ç¼–æ’é…ç½®
4. **config.py** - åº”ç”¨ç¨‹åºé…ç½®

## ğŸ‰ é…ç½®å®Œæˆ

### âœ… å·²å®ç°çš„åŠŸèƒ½
- [x] Docker Composeå·æ˜ å°„é…ç½®
- [x] åº”ç”¨ç¨‹åºOUTPUT_DIRé…ç½®
- [x] QueryEngineæ–‡ä»¶ä¿å­˜é›†æˆ
- [x] éªŒè¯æµ‹è¯•è„šæœ¬
- [x] ä½¿ç”¨è¯´æ˜æ–‡æ¡£

### ğŸ“Š é…ç½®ç»Ÿè®¡
- **æ–°å¢é…ç½®é¡¹**: 2ä¸ª
- **ä¿®æ”¹æ–‡ä»¶æ•°**: 2ä¸ª
- **æ–°å¢æ–‡ä»¶æ•°**: 3ä¸ª
- **éªŒè¯é€šè¿‡ç‡**: 83.3%

### ğŸš€ åç»­å»ºè®®
1. åˆ›å»ºæœ¬åœ°ç›®å½•å¹¶è®¾ç½®æƒé™
2. é‡å¯Dockerå®¹å™¨åº”ç”¨é…ç½®
3. æµ‹è¯•æŠ¥å‘Šç”ŸæˆåŠŸèƒ½
4. å®šæœŸæ¸…ç†æ—§æ–‡ä»¶

**æœ¬åœ°å·æ˜ å°„é…ç½®å·²æˆåŠŸå®Œæˆï¼ç°åœ¨æ‚¨å¯ä»¥å°†æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°æœ¬åœ° `D:\bettafish\reports` ç›®å½•ä¸­ã€‚** ğŸŠ

---

**é…ç½®å®Œæˆæ—¶é—´**: 2025-11-06
**é¡¹ç›®**: BettaFish - æ™ºèƒ½èˆ†æƒ…åˆ†æç³»ç»Ÿ
**åŠŸèƒ½**: æœ¬åœ°å·æ˜ å°„
**çŠ¶æ€**: âœ… é…ç½®å®Œæˆ