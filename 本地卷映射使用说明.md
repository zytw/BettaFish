# BettaFish æœ¬åœ°å·æ˜ å°„ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

BettaFishé¡¹ç›®ç°å·²æ”¯æŒæœ¬åœ°å·æ˜ å°„åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥å°†å®¹å™¨å†…ç”Ÿæˆçš„æ‰€æœ‰æŠ¥å‘Šå’Œæ–‡ä»¶ç›´æ¥å­˜å‚¨åˆ°æœ¬åœ°Windowsç›®å½• `D:\bettafish\reports` ä¸­ã€‚

## ğŸ—‚ï¸ å·æ˜ å°„é…ç½®

### æ–°å¢çš„å·æ˜ å°„
```yaml
volumes:
  # æœ¬åœ°æŠ¥å‘Šç›®å½•æ˜ å°„ - æ‰€æœ‰ç”Ÿæˆçš„æŠ¥å‘Šç»Ÿä¸€å­˜å‚¨åˆ°æœ¬åœ°
  - D:/bettafish/reports:/app/reports
```

### å®Œæ•´çš„å·æ˜ å°„åˆ—è¡¨
```yaml
volumes:
  # æœ¬åœ°æ—¥å¿—ç›®å½•æ˜ å°„
  - ./logs:/app/logs

  # æœ¬åœ°æŠ¥å‘Šç›®å½•æ˜ å°„ - æ‰€æœ‰ç”Ÿæˆçš„æŠ¥å‘Šç»Ÿä¸€å­˜å‚¨åˆ°æœ¬åœ°
  - D:/bettafish/reports:/app/reports

  # å„å¼•æ“çš„StreamlitæŠ¥å‘Šç›®å½•æ˜ å°„
  - ./final_reports:/app/final_reports
  - ./insight_engine_streamlit_reports:/app/insight_engine_streamlit_reports
  - ./media_engine_streamlit_reports:/app/media_engine_streamlit_reports
  - ./query_engine_streamlit_reports:/app/query_engine_streamlit_reports
```

## ğŸ”§ é…ç½®å˜æ›´

### 1. docker-compose.yml
- âœ… æ·»åŠ äº† `D:/bettafish/reports:/app/reports` æ˜ å°„
- âœ… ä¿æŒç°æœ‰çš„å…¶ä»–å·æ˜ å°„ä¸å˜

### 2. config.py
- âœ… æ–°å¢ `OUTPUT_DIR: str = Field("/app/reports", description="æŠ¥å‘Šå’Œè¾“å‡ºæ–‡ä»¶çš„ä¿å­˜ç›®å½•")`
- âœ… åº”ç”¨ç¨‹åºç°åœ¨ä¼šå°†æ‰€æœ‰æŠ¥å‘Šä¿å­˜åˆ° `/app/reports` ç›®å½•
- âœ… é€šè¿‡å·æ˜ å°„ï¼Œæ–‡ä»¶è‡ªåŠ¨åŒæ­¥åˆ° `D:\bettafish\reports`

## ğŸ“ ç›®å½•ç»“æ„

### å®¹å™¨å†…ç›®å½•
```
/app/
â”œâ”€â”€ logs/                          # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ reports/                       # ä¸»è¦æŠ¥å‘Šè¾“å‡ºç›®å½• (æ–°å¢)
â”‚   â”œâ”€â”€ deep_search_report_*.md    # æ·±åº¦æœç´¢æŠ¥å‘Š
â”‚   â”œâ”€â”€ state_*.json              # çŠ¶æ€æ–‡ä»¶
â”‚   â””â”€â”€ ...
â”œâ”€â”€ final_reports/                 # æœ€ç»ˆæŠ¥å‘Š
â”œâ”€â”€ insight_engine_streamlit_reports/  # Insightå¼•æ“æŠ¥å‘Š
â”œâ”€â”€ media_engine_streamlit_reports/    # Mediaå¼•æ“æŠ¥å‘Š
â””â”€â”€ query_engine_streamlit_reports/    # Queryå¼•æ“æŠ¥å‘Š
```

### æœ¬åœ°ç›®å½• (Windows)
```
D:\bettafish\reports\              # æ˜ å°„åˆ°å®¹å™¨å†…çš„ /app/reports
â”œâ”€â”€ deep_search_report_*.md        # æ·±åº¦æœç´¢æŠ¥å‘Š
â”œâ”€â”€ state_*.json                  # çŠ¶æ€æ–‡ä»¶
â””â”€â”€ ...
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åˆ›å»ºæœ¬åœ°ç›®å½•
åœ¨å¯åŠ¨å®¹å™¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿åˆ›å»ºæœ¬åœ°ç›®å½•ï¼š
```bash
# åœ¨Windowså‘½ä»¤æç¤ºç¬¦æˆ–PowerShellä¸­æ‰§è¡Œ
mkdir D:\bettafish\reports
```

### 2. å¯åŠ¨å®¹å™¨
```bash
# åœæ­¢ç°æœ‰å®¹å™¨
docker-compose down

# é‡æ–°å¯åŠ¨å®¹å™¨ï¼ˆä¼šè‡ªåŠ¨åº”ç”¨æ–°çš„å·æ˜ å°„ï¼‰
docker-compose up -d
```

### 3. éªŒè¯å·æ˜ å°„
```bash
# æ£€æŸ¥å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
docker-compose ps

# éªŒè¯å·æ˜ å°„
docker inspect bettafish | findstr "D:/bettafish/reports"
```

### 4. æŸ¥çœ‹ç”Ÿæˆçš„æŠ¥å‘Š
æ‰€æœ‰åœ¨å®¹å™¨å†… `/app/reports` ç›®å½•ä¸­ç”Ÿæˆçš„æ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨å‡ºç°åœ¨æ‚¨çš„æœ¬åœ° `D:\bettafish\reports` ç›®å½•ä¸­ã€‚

## ğŸ“Š å­˜å‚¨çš„æŠ¥å‘Šç±»å‹

é€šè¿‡æ–°çš„å·æ˜ å°„ï¼Œä»¥ä¸‹æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°ï¼š

### 1. æ·±åº¦æœç´¢æŠ¥å‘Š
- æ–‡ä»¶æ ¼å¼: `deep_search_report_{query}_{timestamp}.md`
- åŒ…å«: æœç´¢æŸ¥è¯¢ç»“æœã€åˆ†ææŠ¥å‘Šã€æ€»ç»“

### 2. çŠ¶æ€æ–‡ä»¶
- æ–‡ä»¶æ ¼å¼: `state_{query}_{timestamp}.json`
- åŒ…å«: æœç´¢çŠ¶æ€ã€ä¸­é—´ç»“æœã€é…ç½®ä¿¡æ¯

### 3. å…¶ä»–è¾“å‡ºæ–‡ä»¶
- æ‰€æœ‰åº”ç”¨ç¨‹åºç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶
- ä¸´æ—¶æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶
- è°ƒè¯•å’Œæ—¥å¿—æ–‡ä»¶

## ğŸ” ä¼˜åŠ¿

### 1. æ•°æ®æŒä¹…åŒ–
- âœ… å®¹å™¨åˆ é™¤æˆ–é‡å»ºä¸ä¼šä¸¢å¤±æŠ¥å‘Š
- âœ… æŠ¥å‘Šæ–‡ä»¶æ°¸ä¹…ä¿å­˜åœ¨æœ¬åœ°

### 2. æ˜“äºè®¿é—®
- âœ… æ— éœ€è¿›å…¥å®¹å™¨å³å¯è®¿é—®æ–‡ä»¶
- âœ… å¯ä»¥ç›´æ¥ç”¨æœ¬åœ°ç¼–è¾‘å™¨æŸ¥çœ‹æŠ¥å‘Š

### 3. å¤‡ä»½æ–¹ä¾¿
- âœ… å¯ä»¥ç›´æ¥å¤‡ä»½ `D:\bettafish\reports` ç›®å½•
- âœ… æ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œæ–‡ä»¶ç®¡ç†

### 4. è·¨å¹³å°å…¼å®¹
- âœ… é€‚ç”¨äºWindowsã€macOSã€Linux
- âœ… è·¯å¾„æ ¼å¼è‡ªåŠ¨é€‚é…

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç›®å½•æƒé™
ç¡®ä¿æ‚¨çš„ç”¨æˆ·è´¦æˆ·å¯¹ `D:\bettafish\reports` ç›®å½•æœ‰è¯»å†™æƒé™ã€‚

### 2. ç£ç›˜ç©ºé—´
å®šæœŸæ¸…ç†æ—§æŠ¥å‘Šä»¥é¿å…å ç”¨è¿‡å¤šç£ç›˜ç©ºé—´ã€‚

### 3. è·¯å¾„æ ¼å¼
- Windowsè·¯å¾„ä½¿ç”¨æ­£æ–œæ : `D:/bettafish/reports`
- Dockerè‡ªåŠ¨å¤„ç†è·¯å¾„è½¬æ¢

### 4. ç¯å¢ƒå˜é‡è¦†ç›–
å¦‚æœéœ€è¦è‡ªå®šä¹‰è¾“å‡ºç›®å½•ï¼Œå¯ä»¥åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®ï¼š
```bash
OUTPUT_DIR=/custom/path
```

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1: å®¹å™¨å¯åŠ¨å¤±è´¥
**é”™è¯¯**: ç›®å½•ä¸å­˜åœ¨æˆ–æƒé™ä¸è¶³
**è§£å†³**: ç¡®ä¿ `D:\bettafish\reports` ç›®å½•å­˜åœ¨ä¸”æœ‰æ­£ç¡®æƒé™

### é—®é¢˜2: æ–‡ä»¶æœªåŒæ­¥
**é”™è¯¯**: æœ¬åœ°ç›®å½•çœ‹ä¸åˆ°ç”Ÿæˆçš„æ–‡ä»¶
**è§£å†³**: æ£€æŸ¥å·æ˜ å°„æ˜¯å¦æ­£ç¡®ï¼Œæ‰§è¡Œ `docker-compose down && docker-compose up -d`

### é—®é¢˜3: è·¯å¾„é”™è¯¯
**é”™è¯¯**: æ‰¾ä¸åˆ°æ˜ å°„çš„ç›®å½•
**è§£å†³**: ç¡®ä¿åœ¨Windowsä¸­ä½¿ç”¨æ­£ç¡®çš„è·¯å¾„æ ¼å¼ `D:/bettafish/reports`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥Dockeræ—¥å¿—: `docker-compose logs bettafish`
2. éªŒè¯ç›®å½•æƒé™: ç¡®ä¿å¯¹ `D:\bettafish\reports` æœ‰è¯»å†™æƒé™
3. é‡å¯æœåŠ¡: `docker-compose restart`

## ğŸ‰ æ€»ç»“

é€šè¿‡æ–°å¢çš„æœ¬åœ°å·æ˜ å°„åŠŸèƒ½ï¼ŒBettaFishç°åœ¨å¯ä»¥ï¼š
- âœ… è‡ªåŠ¨å°†æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°
- âœ… æä¾›æŒä¹…åŒ–çš„æ•°æ®å­˜å‚¨
- âœ… ç®€åŒ–æ–‡ä»¶è®¿é—®å’Œå¤‡ä»½æµç¨‹
- âœ… æ”¯æŒè·¨å¹³å°æ–‡ä»¶ç®¡ç†

**äº«å—æ›´ä¾¿æ·çš„BettaFishä½¿ç”¨ä½“éªŒï¼** ğŸš€

---

**æ›´æ–°æ—¶é—´**: 2025-11-06
**ç‰ˆæœ¬**: v2.0
**å…¼å®¹æ€§**: Docker Compose v3.9+